# vim:set ft=tmux:
%hidden MODULE_NAME='ctp_memory'

set -gq '@ram_low_bg_color' '#{E:@thm_green}'
set -gq '@ram_medium_bg_color' '#{E:@thm_yellow}'
set -gq '@ram_high_bg_color' '#{E:@thm_red}'

set -gq "@catppuccin_${MODULE_NAME}_icon" ' '
set -gqF "@catppuccin_${MODULE_NAME}_color" '#{E:@thm_blue}'

set -ogqF "@catppuccin_status_${MODULE_NAME}_icon_fg" "#{E:@thm_crust}"
set -ogqF "@catppuccin_status_${MODULE_NAME}_text_fg" "#{E:@thm_fg}"

%if "#{==:#{@catppuccin_status_${MODULE_NAME}_icon_bg},}"
  set -gqF "@catppuccin_status_${MODULE_NAME}_icon_bg" "#{@catppuccin_${MODULE_NAME}_color}"
%endif

%if "#{==:#{@catppuccin_status_${MODULE_NAME}_text_bg},}"
  set -gF @_ctp_module_text_bg "#{E:@catppuccin_status_module_text_bg}"
%else
  set -gF @_ctp_module_text_bg "#{E:@catppuccin_status_${MODULE_NAME}_text_bg}"
%endif

set -gqF @_ctp_connect_style \
  "#{?#{==:#{@catppuccin_status_connect_separator},yes},,#[bg=default]}"

set -gF "@catppuccin_status_${MODULE_NAME}" \
  "#[fg=#{@catppuccin_status_${MODULE_NAME}_icon_bg}]#{@_ctp_connect_style}#{@catppuccin_status_left_separator}"

set -agF "@catppuccin_status_${MODULE_NAME}" \
  "#[fg=#{@catppuccin_status_${MODULE_NAME}_icon_fg},bg=#{@catppuccin_status_${MODULE_NAME}_icon_bg}]#{@catppuccin_${MODULE_NAME}_icon}"

set -agF "@catppuccin_status_${MODULE_NAME}" \
  "#{@catppuccin_status_middle_separator}"

set -agF "@catppuccin_status_${MODULE_NAME}" \
  "#[fg=#{@catppuccin_status_${MODULE_NAME}_text_fg},bg=#{@_ctp_module_text_bg}]"

set -ag "@catppuccin_status_${MODULE_NAME}" " #(~/.tmux/plugins/tmux-cpu/scripts/ram_percentage.sh)"

set -agF "@catppuccin_status_${MODULE_NAME}" "#[fg=#{@_ctp_module_text_bg}]#{@_ctp_connect_style}#{@catppuccin_status_right_separator}"

set -ug @_ctp_module_text_bg
